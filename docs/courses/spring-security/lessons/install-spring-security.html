<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/ff92f81931bd1587.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ff92f81931bd1587.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cd6432f52d876389.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cd6432f52d876389.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-7269df826c4d1d8b.js" defer=""></script><script src="/_next/static/chunks/framework-ae4f43955bfa5ddc.js" defer=""></script><script src="/_next/static/chunks/main-3cf1b4d0a841b0b4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4e35396f25479038.js" defer=""></script><script src="/_next/static/chunks/116-e8f82ba66f2c41a9.js" defer=""></script><script src="/_next/static/chunks/734-501744163e7117ce.js" defer=""></script><script src="/_next/static/chunks/92-440e540aa7fbcfdf.js" defer=""></script><script src="/_next/static/chunks/637-485e8fd7a429178a.js" defer=""></script><script src="/_next/static/chunks/827-6a9167eb1a9387e0.js" defer=""></script><script src="/_next/static/chunks/pages/courses/spring-security/lessons/install-spring-security-5bb8da01b3c11fc0.js" defer=""></script><script src="/_next/static/_e-p_C0xJot5hRdMGnMZh/_buildManifest.js" defer=""></script><script src="/_next/static/_e-p_C0xJot5hRdMGnMZh/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="header_header___GOuZ sticky-top"><div class="container"><div class="logo_logo__RXjG7 text-white py-2"><div class="hstack"><div class="logo_acronym__FiNtE">FC</div><div class="vr"></div><div><div>FACADE</div><div>CODE</div></div></div></div></div></header><main class="my-3"><div class="container"><section class="header_lessonHeader__jhqot"><div class="float-start">Lesson <!-- -->2<!-- --> of <!-- -->28</div><div class="float-end"><a href="/courses/spring-security">Spring Security</a></div></section><div class="clearfix"></div><div class="mt-5"><div class="float-end"><a href="#" target="_blank" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Download patch"><i class="bi-download fs-5 mx-2 cursor-pointer"></i></a><a href="https://github.com/SankaranarayananMurugan/spring-security-for-developers/tree/install-spring-security" target="_blank" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Github repository"><i class="bi-github fs-5 mx-2 cursor-pointer"></i></a><a href="javascript:void(0)" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Copy link"><i class="bi-link-45deg fs-5 mx-2 cursor-pointer"></i></a></div><div class="clearfix"></div></div><section><h1 class="display-5 mt-2 mb-2">Install Spring Security</h1><p class="Heading_underline__sSwtx"></p><p class="Paragraph_paragraph__90U8D">Let&#x27;s add Spring Security to the application by adding <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">spring-boot-starter-security</mark> dependency to the <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">pom.xml</mark> as below:</p><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/SankaranarayananMurugan/spring-security-for-developers/blob/install-spring-security/pom.xml" target="_blank">pom.xml</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-xml"><span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</span></code></pre></div><p class="Paragraph_paragraph__90U8D">Adding any framework doesn&#x27;t normally have any immediate effect until we provide the corresponding configuration. But by just adding Spring Security dependency, it secures all the resources (incl. static resources) by default. Restart the application and send a GET request to <u>ListCourses</u> API in Postman, instead of receiving the list of courses we will receive <em>401 Unauthorized</em> error.</p><div class="p-3"><div class="mb-3 text-secondary text-center"><em>401 Unauthorized error status in Postman</em></div><img class="img-fluid rounded border shadow" src="/assets/images/spring-security/lesson02-01.png" alt="401 Unauthorized error status in Postman"/></div><p class="Paragraph_paragraph__90U8D">Now let&#x27;s access the same API from the browser, instead of getting <em>401 Unauthorized</em> error we are redirected to a Login page which was not created by us in the application.</p><div class="p-3"><div class="mb-3 text-secondary text-center"><em>302 Found redirect error redirecting the browser to the login page</em></div><img class="img-fluid rounded border shadow" src="/assets/images/spring-security/lesson02-02.png" alt="302 Found redirect error redirecting the browser to the login page"/></div></section><section><h3 class="fw-light mt-5 mb-2">How do we access the APIs?</h3><p class="Paragraph_paragraph__90U8D">Spring Security creates an in-memory user with username <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">user</mark> and a randomly generated password which can be found in the console:</p><div class="border rounded fs-6 my-4"><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
Using generated security password: fdea9fea-3b53-43f8-b78b-046ca27b03af
This generated password is <span class="hljs-keyword">for</span> development use only. Your security configuration must be updated before running your application in production.
</span></code></pre></div><p class="Paragraph_paragraph__90U8D">This password changes each time we re-run the application. If we enter the credentials in the login form, we will be redirected to the requested API URL where we can see the list of courses.</p><div class="p-3"><div class="mb-3 text-secondary text-center"><em>Provide credential in Spring Security default login page</em></div><img class="img-fluid rounded border shadow" src="/assets/images/spring-security/lesson02-03.png" alt="Provide credential in Spring Security default login page"/></div><div class="p-3"><div class="mb-3 text-secondary text-center"><em>List of courses response for the entered credentials in the browser</em></div><img class="img-fluid rounded border shadow" src="/assets/images/spring-security/lesson02-04.png" alt="List of courses response for the entered credentials in the browser"/></div><p class="Paragraph_paragraph__90U8D">Similarly let&#x27;s go back to Postman, choose Basic Auth in Authorization tab, and enter the same credentials, we will receive the list of courses as API response.</p><div class="p-3"><div class="mb-3 text-secondary text-center"><em>List of courses response for the entered credentials in Postman</em></div><img class="img-fluid rounded border shadow" src="/assets/images/spring-security/lesson02-05.png" alt="List of courses response for the entered credentials in Postman"/></div><p class="Paragraph_paragraph__90U8D">We can notice Spring Security behaves differently while accessing the API from Postman and Browser. This is because of different <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">AuthenticationEntryPoint</mark> implementations used to start the authentication process.</p><p class="Paragraph_paragraph__90U8D"><mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">Basic Auth</mark> is the out-of-the-box authentication mechanism enabled by Spring Security. And therefore <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">BasicAuthenticationEntryPoint</mark> is the default <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">AuthenticationEntryPoint</mark>. It responds with <em>401 Unauthorized</em> error with <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">WWW-Authenticate</mark> header value <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">Basic realm=&quot;Realm&quot;</mark> for any unauthenticated requests. This header value enabled us to know the authentication method used to access the resource while using Postman.</p><p class="Paragraph_paragraph__90U8D">Whereas, if the unauthenticated request has any of the following <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">Accept</mark> header values: <em>text/html, application/xml, application/xhtml+xml</em>, Spring Security will then replace the default <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">AuthenticationEntryPoint</mark> with <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">LoginUrlAuthenticationEntryPoint</mark>. It responds with <em>302 redirect</em> error and redirects the browser to the default login page provided by Spring Security. Thus Basic Auth is replaced with form based login authentication mechanism while using browser.</p></section><div class="mt-5"><div class="float-end text-secondary"><a href="#" target="_blank" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Download patch"><i class="bi-download fs-5 mx-2 cursor-pointer"></i></a><a href="https://github.com/SankaranarayananMurugan/spring-security-for-developers/tree/install-spring-security" target="_blank" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Github repository"><i class="bi-github fs-5 mx-2 cursor-pointer"></i></a><a href="javascript:void(0)" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Copy link"><i class="bi-link-45deg fs-5 mx-2 cursor-pointer"></i></a></div><div class="clearfix"></div></div><hr class=""/><section><p class="Paragraph_paragraph__90U8D"><span class="float-start"><i class="bi-arrow-left-short mx-1 align-middle footer_icon__J1tGG"></i><a href="/courses/spring-security/lessons/introduction">Introduction</a></span><span class="float-end"><a href="/courses/spring-security/lessons/enable-basic-auth">Enable Basic Auth</a><i class="bi-arrow-right-short mx-1 align-middle footer_icon__J1tGG"></i></span></p><div class="clearfix"></div></section></div></main><footer class="footer_footer__0KXQq"><div class="mt-5 py-5 text-center fw-lighter text-light bg-secondary"><div class="container"><figure><blockquote class="blockquote">I’m not a great programmer; I’m just a good programmer with great habits</blockquote><figcaption class="blockquote-footer text-light">Kent Beck</figcaption></figure></div></div><div class="py-5 bg-dark"><div class="container"><div class="row"><div class="col-9"><div class="logo_logo__RXjG7 text-white py-2"><div class="hstack"><div class="logo_acronym__FiNtE">FC</div><div class="vr"></div><div><div>FACADE</div><div>CODE</div></div></div></div></div><div class="col"><strong>COURSES</strong><ul class="list-unstyled p-0"><li class="my-2"><a href="/courses/spring-security">Spring Security</a></li></ul></div></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/courses/spring-security/lessons/install-spring-security","query":{},"buildId":"_e-p_C0xJot5hRdMGnMZh","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>